"0","library(tidyverse)"
"0","library(glue)"
"0","library(leaflet)"
"0","library(geobuffer)"
"0","library(sf)"
"0",""
"0","#DATA"
"0","beer_awards <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-10-20/beer_awards.csv')"
"0",""
"0","us_cities_states_counties <- read_csv('https://raw.githubusercontent.com/kelvins/US-Cities-Database/main/csv/us_cities.csv')"
"0",""
"0",""
"0","#TIDY"
"0",""
"0","locations <- inner_join(beer_awards, us_cities_states_counties, by = c(""state"" = ""STATE_CODE"" , ""city"" = ""CITY"")) %>%"
"0","  distinct(medal, beer_name, brewery, city, state, .keep_all = TRUE) %>%"
"0","  filter(medal == ""Gold"") %>%"
"0","  group_by(LATITUDE, LONGITUDE) %>%"
"0","  mutate(all_pubs = paste(unique(brewery), collapse = "", ""), all_beers = paste(beer_name, collapse = "", ""), all_years = paste(year, collapse = "", ""))"
"0",""
"0","cities <- st_as_sf(locations, coords=c(""LONGITUDE"", ""LATITUDE""), crs = 4326) %>%"
"0","  st_transform(crs = 7801)"
"0",""
"0","buffer_1km <- st_buffer(cities, 80467) %>%"
"0","  st_union() %>%"
"0","  st_cast(""POLYGON"") %>%"
"0","  st_transform(crs = 4326)"
"0",""
"0","#PLOT"
"0",""
"0","map <- leaflet(width = ""100%"") %>%"
"0","  addMeasure(primaryLengthUnit = ""meters"") %>%"
"0","  addTiles() %>%"
"0","  addPolygons(data = buffer_1km) %>%"
"0","  addCircleMarkers(data = locations, ~LONGITUDE, ~LATITUDE, fillOpacity = 0.5, radius=2, color = ""purple"","
"0","                   popup=~paste(""<strong>City:</strong>"", city, state,"
"0","                                ""<br>"","
"0","                                ""<strong>Gold Medal Brewery:</strong>"",all_pubs))"
"0","map"
